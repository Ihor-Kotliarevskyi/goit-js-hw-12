{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst URL = 'https://pixabay.com/api/';\nconst KEY = '52764873-a8569ac81d8d8c122be292efa';\nexport const PER_PAGE = 150;\n\nexport function getImagesByQuery(query, pageNumber) {\n  return axios\n    .get(`${URL}`, {\n      params: {\n        key: KEY,\n        q: query,\n        per_page: PER_PAGE,\n        page: pageNumber,\n        type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n      },\n    })\n    .then(response => {\n      console.log(response);\n\n      return response.data;\n    });\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { loader, loadMoreButton } from '../main';\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n  overlayOpacity: 0.85,\n  showCounter: true,\n});\n\nexport function createGallery(images, galleryElements) {\n  const markup = images\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => {\n        return `<li class=\"gallery-item\">\n                <div class=\"image-box\">\n                  <a class=\"gallery-link\" href=\"${largeImageURL}\">\n                      <img\n                        class=\"gallery-image\"\n                        src=\"${webformatURL}\"\n                        alt=\"${tags}\"\n                      />\n                  </a>\n                  </div>\n                  <ul class=\"image-stats\">\n                    <li class=\"image-stat-item\">\n                      <h4>Likes</h4>\n                      <p>${likes}</p>\n                    </li>\n                    <li class=\"image-stat-item\">\n                      <h4>Views</h4>\n                      <p>${views}</p>\n                    </li>\n                    <li class=\"image-stat-item\">\n                      <h4>Comments</h4>\n                      <p>${comments}</p>\n                    </li>\n                    <li class=\"image-stat-item\">\n                      <h4>Downloads</h4>\n                      <p>${downloads}</p>\n                    </li>\n                  </ul>\n                </li>`;\n      }\n    )\n    .join('');\n\n  galleryElements.insertAdjacentHTML('beforeend', markup);\n  lightbox.refresh();\n}\n\nexport function clearGallery(elem) {\n  elem.innerHTML = '';\n}\n\nexport function showLoader() {\n  loader.style.display = 'block';\n}\n\nexport function hideLoader() {\n  loader.style.display = 'none';\n}\n\nexport function showLoadMoreButton() {\n  loadMoreButton.style.display = 'block';\n}\n\nexport function hideLoadMoreButton() {\n  loadMoreButton.style.display = 'none';\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { getImagesByQuery, PER_PAGE } from './js/pixabay-api';\n\nimport {\n  clearGallery,\n  createGallery,\n  hideLoader,\n  hideLoadMoreButton,\n  showLoader,\n  showLoadMoreButton,\n} from './js/render-functions';\n\nexport const loader = document.querySelector('.loader');\nexport const loadMoreButton = document.querySelector('.load-more-button');\n\nconst searchInput = document.querySelector('.form');\nconst gallery = document.querySelector('.gallery');\n\nsearchInput.addEventListener('submit', submitSearch);\nloadMoreButton.addEventListener('click', loadMore);\n\niziToast.settings({\n  timeout: 2500,\n  progressBar: false,\n  transitionIn: 'flipInX',\n  transitionOut: 'flipInX',\n});\n\nlet pageCounter = 1;\nlet searchText = '';\n\nfunction submitSearch(event) {\n  event.preventDefault();\n  pageCounter = 1;\n  searchText = event.target.elements['search-text'].value.trim();\n\n  if (!searchText) {\n    iziToast.warning({\n      title: 'Attention!',\n      message: 'Please enter text to search!',\n      position: 'topRight',\n    });\n  } else {\n    showLoader();\n    clearGallery(gallery);\n    getImagesByQuery(searchText, pageCounter)\n      .then(data => {\n        if (!data.hits.length) {\n          // hideLoadMoreButton();\n          iziToast.info({\n            title: 'Info',\n            message:\n              'Sorry, there are no images matching your search query. Please try again!',\n            color: '#f8e730ff',\n            position: 'bottomCenter',\n          });\n        } else {\n          clearGallery(gallery);\n          createGallery(data.hits, gallery);\n          showLoadMoreButton();\n          pageCounter++;\n          console.log(data);\n          if (data.totalHits / PER_PAGE <= pageCounter) {\n            hideLoadMoreButton();\n            iziToast.info({\n              title: 'Info',\n              message:\n                \"We're sorry, but you've reached the end of search results.\",\n              timeout: 2500,\n              color: '#f8e730ff',\n              position: 'bottomCenter',\n            });\n          }\n        }\n      })\n      .catch(error => {\n        iziToast.error({\n          title: `Ooops!`,\n          message: `${error.message}`,\n          position: 'bottomRight',\n        });\n      })\n      .finally(() => {\n        searchInput.reset();\n        hideLoader();\n      });\n  }\n}\n\nfunction loadMore(event) {\n  event.preventDefault();\n  showLoader();\n  getImagesByQuery(searchText, pageCounter)\n    .then(data => {\n      if (data.totalHits / PER_PAGE <= pageCounter) {\n        createGallery(data.hits, gallery);\n        hideLoadMoreButton();\n        iziToast.info({\n          title: 'Info',\n          message: \"We're sorry, but you've reached the end of search results.\",\n          timeout: 2500,\n          color: '#f8e730ff',\n          position: 'bottomCenter',\n        });\n      } else {\n        createGallery(data.hits, gallery);\n        showLoadMoreButton();\n        pageCounter++;\n        console.log(data);\n      }\n    })\n    .catch(error => {\n      iziToast.error({\n        title: `Ooops!`,\n        message: `${error.message}`,\n        position: 'bottomRight',\n      });\n    })\n    .finally(() => {\n      hideLoader();\n    });\n}\n"],"names":["URL","KEY","PER_PAGE","getImagesByQuery","query","pageNumber","axios","response","lightbox","SimpleLightbox","createGallery","images","galleryElements","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","clearGallery","elem","showLoader","loader","hideLoader","showLoadMoreButton","loadMoreButton","hideLoadMoreButton","searchInput","gallery","submitSearch","loadMore","iziToast","pageCounter","searchText","event","data","error"],"mappings":"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"}