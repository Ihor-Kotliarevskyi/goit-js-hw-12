{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst URL = 'https://pixabay.com/api/';\nconst KEY = '52764873-a8569ac81d8d8c122be292efa';\nexport const PER_PAGE = 15;\n\nexport async function getImagesByQuery(query, pageNumber) {\n  const response = await axios.get(`${URL}`, {\n    params: {\n      key: KEY,\n      q: query,\n      per_page: PER_PAGE,\n      page: pageNumber,\n      type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n    },\n  });\n  return response.data;\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { loader, loadMoreButton } from '../main';\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n  overlayOpacity: 0.85,\n  showCounter: true,\n});\n\nexport function createGallery(images, galleryElements) {\n  const markup = images\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => {\n        return `<li class=\"gallery-item\">\n                <div class=\"image-box\">\n                  <a class=\"gallery-link\" href=\"${largeImageURL}\">\n                      <img\n                        class=\"gallery-image\"\n                        src=\"${webformatURL}\"\n                        alt=\"${tags}\"\n                      />\n                  </a>\n                  </div>\n                  <ul class=\"image-stats\">\n                    <li class=\"image-stat-item\">\n                      <h4>Likes</h4>\n                      <p>${likes}</p>\n                    </li>\n                    <li class=\"image-stat-item\">\n                      <h4>Views</h4>\n                      <p>${views}</p>\n                    </li>\n                    <li class=\"image-stat-item\">\n                      <h4>Comments</h4>\n                      <p>${comments}</p>\n                    </li>\n                    <li class=\"image-stat-item\">\n                      <h4>Downloads</h4>\n                      <p>${downloads}</p>\n                    </li>\n                  </ul>\n                </li>`;\n      }\n    )\n    .join('');\n\n  galleryElements.insertAdjacentHTML('beforeend', markup);\n  lightbox.refresh();\n}\n\nexport function clearGallery(elem) {\n  elem.innerHTML = '';\n}\n\nexport function showLoader() {\n  loader.style.display = 'block';\n}\n\nexport function hideLoader() {\n  loader.style.display = 'none';\n}\n\nexport function showLoadMoreButton() {\n  loadMoreButton.style.display = 'block';\n}\n\nexport function hideLoadMoreButton() {\n  loadMoreButton.style.display = 'none';\n}\n\nexport function scroll(pxY) {\n  window.scrollBy({\n    top: pxY,\n    left: 0,\n    behavior: 'smooth',\n  });\n}\n\nexport function getHeightImageCard(elem) {\n  const rect = elem[0].getBoundingClientRect();\n  return (rect.height + 24) * 2;\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { getImagesByQuery, PER_PAGE } from './js/pixabay-api';\n\nimport {\n  clearGallery,\n  createGallery,\n  getHeightImageCard,\n  hideLoader,\n  hideLoadMoreButton,\n  scroll,\n  showLoader,\n  showLoadMoreButton,\n} from './js/render-functions';\n\nexport const loader = document.querySelector('.loader');\nexport const loadMoreButton = document.querySelector('.load-more-button');\n\nconst searchInput = document.querySelector('.form');\nconst gallery = document.querySelector('.gallery');\n\nsearchInput.addEventListener('submit', submitSearch);\nloadMoreButton.addEventListener('click', loadMore);\n\nlet pageCounter = 1;\nlet searchText = '';\n\nfunction submitSearch(event) {\n  event.preventDefault();\n  pageCounter = 1;\n  searchText = event.target.elements['search-text'].value.trim();\n\n  if (!searchText) {\n    showWarning();\n  } else {\n    showLoader();\n    clearGallery(gallery);\n    getImagesByQuery(searchText, pageCounter)\n      .then(data => {\n        if (!data.hits.length) {\n          hideLoadMoreButton();\n          showInfo(\n            'Sorry, there are no images matching your search query. Please try again!'\n          );\n        } else {\n          clearGallery(gallery);\n          createGallery(data.hits, gallery);\n          showLoadMoreButton();\n          pageCounter++;\n          if (data.totalHits / PER_PAGE <= pageCounter) {\n            hideLoadMoreButton();\n            showInfo(\n              \"We're sorry, but you've reached the end of search results.\"\n            );\n          }\n        }\n      })\n      .catch(error => {\n        showError(error);\n      })\n      .finally(() => {\n        searchInput.reset();\n        hideLoader();\n      });\n  }\n}\n\nfunction loadMore(event) {\n  event.preventDefault();\n  showLoader();\n  getImagesByQuery(searchText, pageCounter)\n    .then(data => {\n      if (data.totalHits / PER_PAGE <= pageCounter) {\n        createGallery(data.hits, gallery);\n        hideLoadMoreButton();\n        scroll(getHeightImageCard(gallery.children));\n        showInfo(\"We're sorry, but you've reached the end of search results.\");\n      } else {\n        createGallery(data.hits, gallery);\n        showLoadMoreButton();\n        scroll(getHeightImageCard(gallery.children));\n        pageCounter++;\n      }\n    })\n    .catch(error => {\n      showError(error);\n    })\n    .finally(() => {\n      hideLoader();\n    });\n}\n\niziToast.settings({\n  timeout: 4000,\n  progressBar: false,\n});\n\nfunction showInfo(message) {\n  iziToast.info({\n    title: 'Info',\n    message: `${message}`,\n    color: '#f8e730ff',\n    position: 'bottomCenter',\n  });\n}\n\nfunction showWarning() {\n  iziToast.warning({\n    title: 'Attention!',\n    message: 'Please enter text to search!',\n    position: 'topRight',\n  });\n}\n\nfunction showError(error) {\n  iziToast.error({\n    title: `Ooops!`,\n    message: `${error.message}`,\n    position: 'bottomRight',\n  });\n}\n"],"names":["URL","KEY","PER_PAGE","getImagesByQuery","query","pageNumber","axios","lightbox","SimpleLightbox","createGallery","images","galleryElements","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","clearGallery","elem","showLoader","loader","hideLoader","showLoadMoreButton","loadMoreButton","hideLoadMoreButton","scroll","pxY","getHeightImageCard","searchInput","gallery","submitSearch","loadMore","pageCounter","searchText","event","data","showInfo","error","showError","showWarning","iziToast","message"],"mappings":"owBAEA,MAAMA,EAAM,2BACNC,EAAM,qCACCC,EAAW,GAEjB,eAAeC,EAAiBC,EAAOC,EAAY,CAYxD,OAXiB,MAAMC,EAAM,IAAI,GAAGN,CAAG,GAAI,CACzC,OAAQ,CACN,IAAKC,EACL,EAAGG,EACH,SAAUF,EACV,KAAMG,EACN,KAAM,QACN,YAAa,aACb,WAAY,EAClB,CACA,CAAG,GACe,IAClB,CCfA,MAAME,EAAW,IAAIC,EAAe,aAAc,CAChD,aAAc,MACd,aAAc,IACd,eAAgB,IAChB,YAAa,EACf,CAAC,EAEM,SAASC,EAAcC,EAAQC,EAAiB,CACrD,MAAMC,EAASF,EACZ,IACC,CAAC,CACC,aAAAG,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACR,IACe;AAAA;AAAA,kDAEmCL,CAAa;AAAA;AAAA;AAAA,+BAGhCD,CAAY;AAAA,+BACZE,CAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BAORC,CAAK;AAAA;AAAA;AAAA;AAAA,2BAILC,CAAK;AAAA;AAAA;AAAA;AAAA,2BAILC,CAAQ;AAAA;AAAA;AAAA;AAAA,2BAIRC,CAAS;AAAA;AAAA;AAAA,sBAKpC,EACK,KAAK,EAAE,EAEVR,EAAgB,mBAAmB,YAAaC,CAAM,EACtDL,EAAS,QAAO,CAClB,CAEO,SAASa,EAAaC,EAAM,CACjCA,EAAK,UAAY,EACnB,CAEO,SAASC,GAAa,CAC3BC,EAAO,MAAM,QAAU,OACzB,CAEO,SAASC,GAAa,CAC3BD,EAAO,MAAM,QAAU,MACzB,CAEO,SAASE,GAAqB,CACnCC,EAAe,MAAM,QAAU,OACjC,CAEO,SAASC,GAAqB,CACnCD,EAAe,MAAM,QAAU,MACjC,CAEO,SAASE,EAAOC,EAAK,CAC1B,OAAO,SAAS,CACd,IAAKA,EACL,KAAM,EACN,SAAU,QACd,CAAG,CACH,CAEO,SAASC,EAAmBT,EAAM,CAEvC,OADaA,EAAK,CAAC,EAAE,sBAAqB,EAC7B,OAAS,IAAM,CAC9B,CC5EO,MAAME,EAAS,SAAS,cAAc,SAAS,EACzCG,EAAiB,SAAS,cAAc,mBAAmB,EAElEK,EAAc,SAAS,cAAc,OAAO,EAC5CC,EAAU,SAAS,cAAc,UAAU,EAEjDD,EAAY,iBAAiB,SAAUE,CAAY,EACnDP,EAAe,iBAAiB,QAASQ,CAAQ,EAEjD,IAAIC,EAAc,EACdC,EAAa,GAEjB,SAASH,EAAaI,EAAO,CAC3BA,EAAM,eAAc,EACpBF,EAAc,EACdC,EAAaC,EAAM,OAAO,SAAS,aAAa,EAAE,MAAM,KAAI,EAEvDD,GAGHd,EAAU,EACVF,EAAaY,CAAO,EACpB7B,EAAiBiC,EAAYD,CAAW,EACrC,KAAKG,GAAQ,CACPA,EAAK,KAAK,QAMblB,EAAaY,CAAO,EACpBvB,EAAc6B,EAAK,KAAMN,CAAO,EAChCP,EAAkB,EAClBU,IACIG,EAAK,UAAYpC,GAAYiC,IAC/BR,EAAkB,EAClBY,EACE,4DACd,KAbUZ,EAAkB,EAClBY,EACE,0EACZ,EAaM,CAAC,EACA,MAAMC,GAAS,CACdC,EAAUD,CAAK,CACjB,CAAC,EACA,QAAQ,IAAM,CACbT,EAAY,MAAK,EACjBP,EAAU,CACZ,CAAC,GA9BHkB,EAAW,CAgCf,CAEA,SAASR,EAASG,EAAO,CACvBA,EAAM,eAAc,EACpBf,EAAU,EACVnB,EAAiBiC,EAAYD,CAAW,EACrC,KAAKG,GAAQ,CACRA,EAAK,UAAYpC,GAAYiC,GAC/B1B,EAAc6B,EAAK,KAAMN,CAAO,EAChCL,EAAkB,EAClBC,EAAOE,EAAmBE,EAAQ,QAAQ,CAAC,EAC3CO,EAAS,4DAA4D,IAErE9B,EAAc6B,EAAK,KAAMN,CAAO,EAChCP,EAAkB,EAClBG,EAAOE,EAAmBE,EAAQ,QAAQ,CAAC,EAC3CG,IAEJ,CAAC,EACA,MAAMK,GAAS,CACdC,EAAUD,CAAK,CACjB,CAAC,EACA,QAAQ,IAAM,CACbhB,EAAU,CACZ,CAAC,CACL,CAEAmB,EAAS,SAAS,CAChB,QAAS,IACT,YAAa,EACf,CAAC,EAED,SAASJ,EAASK,EAAS,CACzBD,EAAS,KAAK,CACZ,MAAO,OACP,QAAS,GAAGC,CAAO,GACnB,MAAO,YACP,SAAU,cACd,CAAG,CACH,CAEA,SAASF,GAAc,CACrBC,EAAS,QAAQ,CACf,MAAO,aACP,QAAS,+BACT,SAAU,UACd,CAAG,CACH,CAEA,SAASF,EAAUD,EAAO,CACxBG,EAAS,MAAM,CACb,MAAO,SACP,QAAS,GAAGH,EAAM,OAAO,GACzB,SAAU,aACd,CAAG,CACH"}